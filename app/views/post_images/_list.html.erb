<div class='jscroll-div'> <!-- 無限スクロールに対応させさせるため　-->
<table class='table table-hover table-inverse'>
<% @post_images.each do |post_image| %>
  <div class="card mb-3">
    <%= link_to post_image_path(post_image.id) do %>
      <%= image_tag post_image.resized_image, class: "card-img-top image-slide-down", loading: "lazy" %>
    <% end %>
    <div class="card-body">
      <h5 class="card-text">
        <%= image_tag post_image.customer.get_profile_image(210,210), class: "rounded image-slide-down profile-image" %>
        <span class="customer-name"><%= post_image.customer.name %></span>
      </h5>
      <h3 class="card-title"><%= post_image.title %></h3>
      <p class="card-text"><%= post_image.caption %></p>
      <p class="card-text"><%= link_to "#{post_image.post_comments.count} コメント", post_image_path(post_image.id) %></p>
    </div>
  </div>
<% end %>
</table>
<%= paginate @post_images %>
</div>

<script>
document.addEventListener('turbolinks:load', function() {
  $('.jscroll-div').jscroll({
    autoTrigger: true,
    loadingHtml: '<p>読み込み中...</p>', // ローディングメッセージ
    padding: 10,
    nextSelector: '.pagination .next a', // 次ページリンクのセレクタ
    contentSelector: 'div.jscroll-div', // 無限スクロールで読み込むコンテンツ全体を指定
    callback: function() {
      $('.pagination').remove(); // 読み込み後にページネーションリンクを削除
    }
  });
});
</script>

<style>
  .pagination {
    visibility: hidden;
  }
</style>